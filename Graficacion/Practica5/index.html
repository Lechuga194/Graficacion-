<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8" />
  <title>Page Title</title>
  <script type="module" src="./js/Main.js"></script>
</head>

<body>
  <canvas id="the_canvas" width="800" height="600"></canvas><br>

  <script id="2d-vertex-shader" type="vertex-shader">
  precision mediump float;

  attribute vec4 a_position;
  attribute vec4 a_color;
  attribute vec3 a_normal;
  
  uniform mat4 u_PVM_matrix;
  uniform mat4 u_VM_matrix; 
  uniform vec3 u_light_position;

  varying vec3 v_position;
  varying vec4 v_color;
  varying vec3 v_normal;

  void main() {
    v_position = vec3( u_VM_matrix * a_position );
    v_normal = vec3( u_VM_matrix * vec4(a_normal, 0) );

    v_color = a_color;

    gl_Position = u_PVM_matrix * a_position;
  }
  </script>
   
  <script id="2d-fragment-shader" type="fragment-shader">
  precision mediump float;

  uniform vec3 u_light_position;

  varying vec3 v_position;
  varying vec4 v_color;
  varying vec3 v_normal;

  uniform vec4 u_color;

  void main() {
    vec3 to_light = normalize( u_light_position - v_position );

    vec3 fragment_normal = normalize(v_normal);

    float cos_angle = max(dot(fragment_normal, to_light), 0.0);

    gl_FragColor = vec4(vec3(v_color) * cos_angle, v_color.a);
  }
  </script>

  <!-- shaders para dibujar la luz como un punto -->
  <script id="light-vertex-shader" type="vertex-shader">
  attribute vec4 a_position;
  uniform mat4 u_PVM_matrix;

  void main() {
    // se especifica el tama√±o del punto
    gl_PointSize = 10.0;
    gl_Position = u_PVM_matrix * a_position;
  }
  </script>
  <script id="light-fragment-shader" type="fragment-shader">
  precision mediump float;
  void main() {
    gl_FragColor = vec4(1.0, 1.0, 1.0, 1.0);
  }
  </script>

</body>

</html>